{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/timeseries-forecasting-2/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Yeti in Ness"}},"markdownRemark":{"id":"cd25b808-bdd7-5ca8-a85f-352f315a9de3","excerpt":"이전 포스트에서는 시계열 데이터라고 하는 것을 이루는 구성요소와, 예측을 위해 가장 쉽게 떠오르는 단순회귀 모형을 시계열 예측에 쓰는 것이 적합하지 않은 원인인(물론 이걸 반영한 회귀 모델도 있으나) 자기회귀 개념과 데이터에 자기 회귀가 존재하는지 정량적으로 테스트하는 Durbin…","html":"<p>이전 포스트에서는 시계열 데이터라고 하는 것을 이루는 구성요소와, 예측을 위해 가장 쉽게 떠오르는 단순회귀 모형을 시계열 예측에 쓰는 것이 적합하지 않은 원인인(물론 이걸 반영한 회귀 모델도 있으나) 자기회귀 개념과 데이터에 자기 회귀가 존재하는지 정량적으로 테스트하는 Durbin-Watson Test에 대해 알아보았다.</p>\n<blockquote>\n<p>내면의 성마른 학생: 아 알겠고 그래서 예측은 언제 하냐고요~~ 나 빨리 코드 짜서 예측하는 과제 해야 한다고요~</p>\n</blockquote>\n<p>이제 할 거다.</p>\n<h3>간단한 예측 모델: 구간 평균법</h3>\n<p>나한테 N개(구간)의 과거 시점 데이터가 주어졌고, 그 이후의 값을 예측하라는 과제가 나오면 생각할 수 있는 가장 간단한 방법은 뭘까?</p>\n<blockquote>\n<p>갑자기 차분해진 내면의 학생: 음.. 대충 과거기간 y값을 다 산술평균 내면 안되나?</p>\n</blockquote>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>L</mi><mi>t</mi></msub><mo>=</mo><mfrac><mrow><mo stretchy=\"false\">(</mo><msub><mi>D</mi><mi>t</mi></msub><mo>+</mo><msub><mi>D</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><msub><mi>D</mi><mrow><mi>t</mi><mo>−</mo><mi>N</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo></mrow><mi>N</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">L_t = \\frac{(D_t + D_{t-1}+ ... + D_{t-N+1})}{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>그렇다. 구간 평균은 내 생각에 가장 간단하면서 꽤 상식적으로 예측 오차를 최소화 하는 방법이다. 그러나 이 모델에 한계가 많기 때문에 다른 복잡한 방법들이 나왔을 것이다.</p>\n<h4>구간 평균법의 한계</h4>\n<ol>\n<li>과거 N개 시점의 모든 데이터에 대해 똑같은 가중치를 준다. 이전 포스팅 예제처럼, 10년 전 내일 주가를 예측하는 데에 10년 전 주가와 어제의 주가 데이터를 똑같이 고려하는 게 타당한 가정일까?</li>\n<li>미래의 예측값이 모두 동일하다. 명확하게 일주일 단위 주기성을 띤 데이터에 대해서도 구간 평균법은 모든 요일에 대해 같은 예측값을 내놓을 것이다.</li>\n</ol>\n<h3>구간 평균법의 극복: (단순) 지수 평활법(Exponential Smoothing)</h3>\n<p>구간 평균의 한계 중 1번을 극복해보자. 모든 과거 시점에 대해 똑같이 가중치를 주지 말고, 더 중요한 최근 데이터에 대해 가중치를 많이 주면 되잖아? 근데 시간이 오래 지날수록 예측에 대한 중요도가 선형적이 아니라 지수적으로 감소할 것 같으니까.. 가중치도 지수분포 모양으로 주자!</p>\n<blockquote>\n<p>여기에는 단순 지수 평활법 계산식이 들어가야 하는데 일단 전체 흐름을 빠르게 쓰고 싶어서 비워두겠음.</p>\n</blockquote>\n<h4>단순 지수 평활법의 한계</h4>\n<ol>\n<li>여전히 구간 평균법의 2번 한계인, 예측값이 다 똑같다는 것을 극복하지 못했다</li>\n<li>데이터에 우상향 또는 우하향의 트렌드가 존재해도 캐치하지 못한다.</li>\n</ol>\n<h3>단순 지수 평활법의 극복: 이중 지수 평활법(Double Exponential Smoothing)</h3>\n<p>이중 지수 평활은 단순 지수 평활에서 잡아내지 못한 트렌드를 잡아보자고 나왔다. 어떻게? 단순 지수 평활을 두 번 적용한다. 식을 보면 단순 지수 평활과 비슷하지만 Growth Rate을 반영하는 변수가 하나 더 있어서 시점마다 예측값이 달라진다!</p>\n<blockquote>\n<p>여기에는 이중 지수 평활 계산식이 들어가야 하지만 역시 지금 중요한 것은 각 방법의 관계이기 때문에 생략</p>\n</blockquote>\n<h3>이중 지수 평활도 못한 것: Holt-Winter 지수 평활법</h3>\n<p>자 그럼 구간 평균법, 단순 지수 평활법이 가졌던 한계들이 다 극복된 거 아닌가?</p>\n<blockquote>\n<p>???: 아니다. 이중 지수 평활 네놈은 트렌드는 반영했을지 몰라도 계절 변동(Seasonal Variation)까지는 반영하지 못했겠지! 나는.. 계절변 동까지 반영한다!</p>\n</blockquote>\n<p>그렇다. 장기간에 걸친 데이터의 우상향, 우하향 트렌드는 잡혔지만 그 안의 좀 더 작은 cycle들인 seasonal variation까지는 이중 지수 평활이 표현하지 못했던 것이다. 자 계절 변동을 어떻게 반영할 수 있을까? 밝혀두자면 Holt-Winter 지수평활에는 두 가지 방법이 있고, Python이나 R 패키지를 쓸 때도 둘 중 어떤 방식을 쓸지 지정하는 파라메터가 있을 것이다.</p>\n<ul>\n<li>Additive method: 계절 변동의 산포가 일정한 경우.</li>\n</ul>\n<p>=> 더하기, 빼기는 선형적 변화밖에 만들지 못하기 때문에 더 단순한 패턴에 적용</p>\n<ul>\n<li>Multiplicative moethod: 계절 변동의 산포가 증가할 경우</li>\n</ul>\n<p>=> 곱셈을 통해서는 비선형적인 패턴을 표현할 수 있기 때문에 좀 더 복잡한 시계열 패턴에 대해 사용</p>\n<blockquote>\n<p>여기에는 Additive, Multiplicative Holt-Winter Exponential Smoothing에 대한 계산식이 들어가야 하지만..</p>\n</blockquote>\n<h4>요약</h4>\n<p>자, 여기까지 각 방식의 관계를 랩업 해보자.</p>\n<ul>\n<li>구간 평균: 지난 시점 데이터를 산술 평균 낸 값 하나를 미래의 예측값으로 깔자.</li>\n<li>단순 지수 평활: 최근 시점 데이터일수록 지수적으로 중요하니까 가중치를 지수적으로 주되, 미래의 예측값은 여전히 값 하나로 깔자.</li>\n<li>이중 지수 평활: 데이터의 Trend도 반영하기 위해 Grwoth Rate을 넣자. 그럼 시점별로 예측값도 달라진다. 이게 더 말이 되잖아.</li>\n<li>Holt-Winter 지수 평활: Trend 뿐 아니라 Seasonal Variation도 반영하자. 근데 그 계절 변동의 산포가 일정한(그래서 좀 더 단순한) 경우는 additive 방식, 계절 변동 산포가 증가하는 경우에는(좀 더 복잡한) multiplicative 방식을 써주자.</li>\n</ul>","frontmatter":{"title":"통계적 시계열 예측 모델의 흐름 - PART2","date":"February 01, 2022","description":"시계열 예측에 대한 전통적인 통계적 접근 방식들 중 여전히 많이 쓰이는 지수평활법, ARIMA를 각 모델이 발전한 순서와 원인을 중심으로 이해해보자."}},"previous":{"fields":{"slug":"/timeseries-forecasting-1/"},"frontmatter":{"title":"통계적 시계열 예측 모델의 흐름 - PART1"}},"next":null},"pageContext":{"id":"cd25b808-bdd7-5ca8-a85f-352f315a9de3","previousPostId":"db93e5af-acf1-5a6c-8aca-88ce964cd72a","nextPostId":null}},
    "staticQueryHashes": ["2841359383","3257411868"]}